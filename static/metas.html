<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Dashboard - Metas</title>
    <link rel="stylesheet" href="/static/css/base.css?v=1.1">
    <link rel="stylesheet" href="/static/css/dashboard_layout.css?v=1.1">
    <link rel="stylesheet" href="/static/css/metas.css?v=1.2">
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>
</head>
<body>

    <aside class="sidebar">
        <div class="sidebar-header">
            <div class="logo"><i class='bx bxs-bar-chart-alt-2'></i></div>
            <span class="logo-text">Análises</span>
        </div>
        <div class="sidebar-main">
            <a href="/dashboard-web" class="sidebar-link-external" title="Dashboard"><i class='bx bxs-dashboard'></i><span class="link-text">Dashboard</span></a>
            <hr class="sidebar-divider">
            <a href="/metas" class="sidebar-link-external active" title="Metas"><i class='bx bx-target-lock'></i><span class="link-text">Metas</span></a>
            <a href="/chat" class="sidebar-link-external" title="Chat LUCA"><i class='bx bxs-bot'></i><span class="link-text">Chat LUCA</span></a>
        </div>
        <div class="sidebar-bottom">
            <a href="#" id="logout-btn" class="sidebar-link" title="Sair"><i class='bx bx-log-out'></i><span class="link-text">Sair</span></a>
        </div>
    </aside>
    
    <div class="sidebar-overlay"></div>

    <main class="main-content">
        <header class="main-header">
            <button id="sidebar-toggle-btn" class="header-button" title="Abrir/Fechar Menu"><i class='bx bx-menu'></i></button>
            <h1 class="header-title">Gerenciador de Metas</h1>
        </header>
        
        <div class="container">
            <div class="page-header">
                <h2>Metas Definidas</h2>
                <button id="open-meta-modal-btn" class="action-button primary"><i class='bx bx-plus'></i> Nova Meta</button>
            </div>

            <div class="card full-width-card">
                <div class="metas-table-container">
                    <table class="ranking-table">
                        <thead>
                            <tr>
                                <th>Indicador</th>
                                <th>Período</th>
                                <th>Valor</th>
                                <th style="text-align: right;">Ações</th>
                            </tr>
                        </thead>
                        <tbody id="metas-table-body"></tbody>
                    </table>
                </div>
            </div>
        </div>
    </main>
    
    <div id="meta-modal-overlay" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="modal-title">Definir Nova Meta</h2>
                <button class="close-button" id="cancel-edit-btn-close" title="Fechar">&times;</button>
            </div>
            <div class="modal-body">
                <form id="meta-form">
                    <div class="form-grid">
                        <div class="form-group full-width">
                            <label for="indicador">Indicador</label>
                            <select id="indicador" class="form-control" required>
                                <option value="FATURAMENTO_MENSAL">Faturamento Mensal (Vendas)</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="mes">Mês</label>
                            <select id="mes" class="form-control" required></select>
                        </div>
                        <div class="form-group">
                            <label for="ano">Ano</label>
                            <input type="number" id="ano" class="form-control" required>
                        </div>
                        <div class="form-group full-width">
                            <label for="valor">Valor da Meta</label>
                            <input type="text" id="valor" class="form-control" required placeholder="R$ 0,00">
                        </div>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button id="cancel-edit-btn" class="modal-button secondary">Cancelar</button>
                <button id="save-meta-btn" class="modal-button primary">Salvar Meta</button>
            </div>
        </div>
    </div>

    <div id="loading-overlay" class="loading-overlay"></div>
    <div id="notification-modal-overlay" class="modal-overlay"></div>
    <div id="confirmation-modal-overlay" class="modal-overlay"></div>
    <div id="logout-confirmation-modal" class="modal-overlay"></div>

    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="/static/js/global.js?v=1.1" defer></script>
    <script src="/static/js/dashboard-utils.js?v=1.1" defer></script>
    <script src="/static/js/metas.js?v=1.3" defer></script>

</body>
</html>